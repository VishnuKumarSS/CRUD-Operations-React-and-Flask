<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>restapi &mdash; Flask API 1.0.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Flask API
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Flask RestApi</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Flask API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Module code</a> &raquo;</li>
      <li>restapi</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for restapi</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Restful api created using flask_restful to perform CRUD operations and Login system with authentication.</span>

<span class="sd">This script allows the user to perform the Create, Read, Update and Delete operations</span>
<span class="sd">using the request methods like POST, GET, PUT, DELETE. </span>
<span class="sd">There are some methods to login and logout the users.</span>

<span class="sd">This module consist of several methods to perform CRUD and to login and logout the users.</span>
<span class="sd">It requires parameters of string for some methods to perform the appropriate action.</span>

<span class="sd">This module requires &#39;flask&#39;, &#39;flask_restful&#39;, &#39;flask_bcrypt&#39;, &#39;flask_session&#39;, &#39;flask_cors&#39; be </span>
<span class="sd">installed within the python environment where we are running this module.</span>

<span class="sd">This file can also be imported as a module and contains the following classes:</span>
<span class="sd">    * ReactGoogleSignin - This will create a user if not registered and logs in the user if already registered with the post method.</span>
<span class="sd">    * CreateUser - This has one method to create user and store the user data on the database and the firebase.</span>
<span class="sd">    * AddUserData - This has one method to add user data and store the user data on the database.</span>
<span class="sd">    * SearchUser - SearchUser class will be responsible for searching, deleting, updating a particular user.</span>
<span class="sd">    * AllUsers - This has one method that gets the user data</span>
<span class="sd">    * Login - This will be responsible for logging in the manually created user.</span>
<span class="sd">    * Logout - This has one method to logout user.</span>
<span class="sd">    * CurrentUser - This has one method to get the currently logged in user.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">email</span> <span class="kn">import</span> <span class="n">message</span>
<span class="kn">import</span> <span class="nn">pdb</span>
<span class="kn">from</span> <span class="nn">flask_restful</span> <span class="kn">import</span> <span class="n">Resource</span><span class="p">,</span> <span class="n">reqparse</span><span class="p">,</span> <span class="n">abort</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">marshal_with</span>
<span class="kn">from</span> <span class="nn">models</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">flask_bcrypt</span> <span class="kn">import</span> <span class="n">Bcrypt</span>
<span class="kn">from</span> <span class="nn">flask_session</span> <span class="kn">import</span> <span class="n">Session</span>
<span class="c1"># this session will be stored on the server side if we have Server sided session enabled...server_session = Session(app)</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">session</span>
<span class="kn">from</span> <span class="nn">authentication</span> <span class="kn">import</span> <span class="n">firebase</span><span class="p">,</span> <span class="n">auth</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span>
<span class="kn">from</span> <span class="nn">flask_cors</span> <span class="kn">import</span> <span class="n">CORS</span>

<span class="c1"># # CORS ( Cross-Origin Resource Sharing )</span>
<span class="n">cors</span> <span class="o">=</span> <span class="n">CORS</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">supports_credentials</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># cors = CORS()</span>
<span class="c1"># cors.init_app(app)</span>

<span class="c1"># for password hashing</span>
<span class="n">bcrypt</span> <span class="o">=</span> <span class="n">Bcrypt</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="c1"># passing our app to the server Session. So, that it will be safe.</span>
<span class="c1"># if we don&#39;t have the server sided session. Then this session will be the client side session. It could easily be  hacked.</span>
<span class="n">server_session</span> <span class="o">=</span> <span class="n">Session</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="n">create_user_req</span> <span class="o">=</span> <span class="n">reqparse</span><span class="o">.</span><span class="n">RequestParser</span><span class="p">()</span>
<span class="n">create_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Email is required.&#39;</span><span class="p">)</span>
<span class="n">create_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;fullname&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Full name is needed.&#39;</span><span class="p">)</span>
<span class="n">create_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;password is required.&#39;</span><span class="p">)</span>

<span class="n">add_user_data_req</span> <span class="o">=</span> <span class="n">reqparse</span><span class="o">.</span><span class="n">RequestParser</span><span class="p">()</span>
<span class="n">add_user_data_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Username is needed.&#39;</span><span class="p">)</span>
<span class="n">add_user_data_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;userage&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Age is needed.&#39;</span><span class="p">,</span> <span class="p">)</span>
<span class="n">add_user_data_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;usercity&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;City is needed.&#39;</span><span class="p">)</span>
<span class="n">add_user_data_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;usertype&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;UserType is needed.&#39;</span><span class="p">)</span>


<span class="n">update_user_req</span> <span class="o">=</span> <span class="n">reqparse</span><span class="o">.</span><span class="n">RequestParser</span><span class="p">()</span>

<span class="n">update_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="n">update_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;fullname&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="n">update_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>

<span class="n">update_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="n">update_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;userage&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">update_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;usercity&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="n">update_user_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;usertype&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>


<span class="n">user_login_req</span> <span class="o">=</span> <span class="n">reqparse</span><span class="o">.</span><span class="n">RequestParser</span><span class="p">()</span>
<span class="c1"># user_login_req.add_argument(&#39;username&#39;, type=str, required=True, help=&#39;Username is needed.&#39;, )</span>
<span class="n">user_login_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Email is needed.&#39;</span><span class="p">,</span> <span class="p">)</span>
<span class="n">user_login_req</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
    <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Password is Required.&#39;</span><span class="p">,</span> <span class="p">)</span>


<span class="n">create_user_field</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;fullname&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">add_user_data_field</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;userage&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span>
    <span class="s1">&#39;usercity&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span><span class="p">,</span>
    <span class="s1">&#39;usertype&#39;</span><span class="p">:</span> <span class="n">fields</span><span class="o">.</span><span class="n">String</span>
<span class="p">}</span>


<div class="viewcode-block" id="ReactGoogleSignin"><a class="viewcode-back" href="../restapi.html#restapi.ReactGoogleSignin">[docs]</a><span class="k">class</span> <span class="nc">ReactGoogleSignin</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This will create a user if not registered and logs in the user if already registered with the post method.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="ReactGoogleSignin.post"><a class="viewcode-back" href="../restapi.html#restapi.ReactGoogleSignin.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method will get the user information like email, fullname, googld_id from the frontend react component and store the data with few conditions.</span>
<span class="sd">        </span>
<span class="sd">        :return: the user is created or logged in or not</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># below we are getting the data&#39;s directly from the frontend. So inside the []  make sure to type the spelling appropriately to the frontend returned data.</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span>
        <span class="n">fullname</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="n">google_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span><span class="p">[</span><span class="s1">&#39;googleId&#39;</span><span class="p">]</span>
        <span class="c1"># or</span>
        <span class="c1"># we can do what we did in login class.</span>

        <span class="c1"># check_table = db.engine.execute(&#39;select * from google_user_data&#39;)</span>

        <span class="c1"># pdb.set_trace()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">google_user</span> <span class="o">=</span> <span class="n">Users</span><span class="p">(</span>
                <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span> <span class="n">fullname</span><span class="o">=</span><span class="n">fullname</span><span class="p">,</span> <span class="n">google_id</span><span class="o">=</span><span class="n">google_id</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">google_user</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">session</span><span class="p">[</span><span class="s1">&#39;created_user_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">google_user</span><span class="o">.</span><span class="n">id</span>
            <span class="c1"># pdb.set_trace()</span>
            <span class="k">return</span> <span class="s1">&#39;Google User Created...&#39;</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># logged_in_user = Users.query.filter_by(id=google_id).first()</span>
            <span class="n">logged_in_user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from users where google_id=&#39;</span><span class="si">{</span><span class="n">google_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">logged_in_user</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">abort</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Unauthorized user...Not found.&quot;</span><span class="p">})</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">session</span><span class="p">[</span><span class="s1">&#39;created_user_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">logged_in_user</span><span class="o">.</span><span class="n">id</span>
            <span class="c1"># pdb.set_trace()</span>
            <span class="k">return</span> <span class="n">logged_in_user</span><span class="o">.</span><span class="n">_asdict</span><span class="p">(),</span> <span class="mi">200</span></div></div>


<div class="viewcode-block" id="AllUsers"><a class="viewcode-back" href="../restapi.html#restapi.AllUsers">[docs]</a><span class="k">class</span> <span class="nc">AllUsers</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This has one method that gets the user data&quot;&quot;&quot;</span>

<div class="viewcode-block" id="AllUsers.get"><a class="viewcode-back" href="../restapi.html#restapi.AllUsers.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method will return all the users and users data stored in the database</span>
<span class="sd">        </span>
<span class="sd">        :return: list of users and users data with custom structure</span>
<span class="sd">        :rtype: [dict, dict]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">allusers</span> <span class="o">=</span> <span class="n">Users</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

        <span class="n">users</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">allusers</span><span class="p">:</span>
            <span class="n">users</span><span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
                <span class="s1">&#39;fullname&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">fullname</span><span class="p">,</span>
                <span class="s1">&#39;google_id&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">google_id</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">google_id</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">password</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">password</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
                <span class="c1"># &#39;username&#39; : user.user_data.username if user.user_data != None else None,</span>
                <span class="c1"># &#39;userage&#39; : user.user_data.userage if user.user_data != None else None,</span>
                <span class="c1"># &#39;usercity&#39; : user.user_data.usercity if user.user_data != None else None,</span>
                <span class="c1"># &#39;usertype&#39; : user.user_data.usertype if user.user_data != None else None</span>
            <span class="p">}</span>

        <span class="n">users_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">allusers</span><span class="p">:</span>
            <span class="n">users_data</span><span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">username</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">user_data</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;userage&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">userage</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">user_data</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;usercity&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">usercity</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">user_data</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;usertype&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">user_data</span><span class="o">.</span><span class="n">usertype</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">user_data</span> <span class="o">!=</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="p">([</span><span class="n">users</span><span class="p">,</span> <span class="n">users_data</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="SearchUser"><a class="viewcode-back" href="../restapi.html#restapi.SearchUser">[docs]</a><span class="k">class</span> <span class="nc">SearchUser</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;SearchUser class will be responsible for searching, deleting, updating a particular user.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="SearchUser.get"><a class="viewcode-back" href="../restapi.html#restapi.SearchUser.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>        
        <span class="sd">&quot;&quot;&quot;This will search for the user and returns that user&#39;s details in a dictionary format if exist, otherwise it will abort the request with User Not found.</span>

<span class="sd">        :param username: This is the name which is coming from the url route while calling api</span>
<span class="sd">        :type username: str</span>

<span class="sd">        :return: list of user and user data  </span>
<span class="sd">        :rtype: [dict, dict]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">userdata</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from user_data where username=&#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from users where id=&#39;</span><span class="si">{</span><span class="n">userdata</span><span class="p">[</span><span class="s1">&#39;users_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;User Not Found.&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">([</span><span class="n">user</span><span class="p">,</span> <span class="n">userdata</span><span class="p">])</span></div>

<div class="viewcode-block" id="SearchUser.delete"><a class="viewcode-back" href="../restapi.html#restapi.SearchUser.delete">[docs]</a>    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This will delete the whole user data with the username if exist, otherwise abort the request. If we try to delete the currently logged in user, it will abort. </span>

<span class="sd">        :param username: This is the name which is coming from the url route while calling api</span>
<span class="sd">        :type username: str</span>

<span class="sd">        :return: the user is deleted or not</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># user_delete = UserData.query.filter_by(username=username).first()</span>
        <span class="c1"># if user_delete:</span>
        <span class="c1">#     db.session.delete(user_delete)</span>
        <span class="c1">#     db.session.commit()</span>
        <span class="c1"># return &#39;User is deleted&#39;</span>
        <span class="c1"># or</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;created_user_id&quot;</span><span class="p">)</span>
        <span class="n">user_delete</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;select * from user_data where username=&#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="c1"># pdb.set_trace()</span>
        <span class="k">if</span> <span class="n">user_delete</span> <span class="ow">and</span> <span class="n">user_delete</span><span class="p">[</span><span class="s1">&#39;users_id&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">user_id</span> <span class="o">!=</span> <span class="n">user_delete</span><span class="p">[</span><span class="s1">&#39;users_id&#39;</span><span class="p">]:</span>
                <span class="c1"># because the index 1 is the username field.</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;DELETE from user_data where username=&#39;</span><span class="si">{</span><span class="n">user_delete</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">user_delete</span><span class="o">.</span><span class="n">users_id</span><span class="p">:</span>
                    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;DELETE from users where id=&#39;</span><span class="si">{</span><span class="n">user_delete</span><span class="o">.</span><span class="n">users_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Can&#39;t delete yourself.&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">user_delete</span><span class="p">:</span>  <span class="c1"># to delete the users without havings users_id</span>
            <span class="c1"># because the index 1 is the username field.</span>
            <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;DELETE from user_data where username=&#39;</span><span class="si">{</span><span class="n">user_delete</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">({</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;User without having the users_id is deleted successfully.&quot;</span><span class="p">}),</span> <span class="mi">200</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;User not found to DELETE.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;User is deleted&#39;</span></div>

    <span class="c1"># @marshal_with(create_user_field )</span>
    <span class="c1"># # Instead of the above line we can use .asdict() function or dict() to return in object format.</span>
<div class="viewcode-block" id="SearchUser.put"><a class="viewcode-back" href="../restapi.html#restapi.SearchUser.put">[docs]</a>    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This will get the username, if any matching user exist then it will update that particular user data.</span>

<span class="sd">        :param username: This is the name which is coming from the url route while calling api</span>
<span class="sd">        :type username: str</span>

<span class="sd">        :return: list of updated user and updated user data  </span>
<span class="sd">        :rtype: [dict, dict]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">parsed_user</span> <span class="o">=</span> <span class="n">update_user_req</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">userdata</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from user_data where username=&#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">Users</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">userdata</span><span class="o">.</span><span class="n">users_id</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span>
                <span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;User is not there to update (or) No appropriate users found.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">user_exist</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from user_data where username=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="n">email_exist</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from users where email=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">userdata</span><span class="p">:</span>
                <span class="c1"># pdb.set_trace()</span>
                <span class="k">if</span> <span class="n">user_exist</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">userdata</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">user_exist</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]:</span>
                        <span class="n">abort</span><span class="p">(</span>
                            <span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Username already exist. It must be unique.&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">email_exist</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="o">!=</span> <span class="n">email_exist</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]:</span>
                        <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Email already exist. It must be unique.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># if user is not there, then...</span>
                <span class="n">abort</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;User is not there to update.&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="o">.</span><span class="n">google_id</span><span class="p">:</span>  <span class="c1"># We should not update google&#39;s data, so...</span>
                <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]:</span>
                    <span class="c1"># db.engine.execute(f&quot;&quot;&quot;Update users SET</span>
                    <span class="c1"># email=&#39;{parsed_user[&#39;email&#39;]}&#39;,</span>
                    <span class="c1"># fullname=&#39;{parsed_user[&#39;fullname&#39;]}&#39;</span>
                    <span class="c1"># where id = &#39;{user.id}&#39;</span>
                    <span class="c1"># &quot;&quot;&quot;)</span>
                    <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Update users SET email=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; WHERE id = &#39;</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;fullname&#39;</span><span class="p">]:</span>
                    <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Update users SET fullname=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;fullname&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; WHERE id = &#39;</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]:</span>
                    <span class="n">hashed_password</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="o">.</span><span class="n">generate_password_hash</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
                    <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Update users SET password=&#39;</span><span class="si">{</span><span class="n">hashed_password</span><span class="si">}</span><span class="s2">&#39; WHERE id = &#39;</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">google_id</span> <span class="ow">and</span> <span class="p">(</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;fullname&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]):</span>
                <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Cannot update google&#39;s data.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]:</span>
                <span class="c1"># db.engine.execute(f&quot;&quot;&quot;Update user_data SET</span>
                <span class="c1"># username=&#39;{parsed_user[&#39;username&#39;]}&#39;,</span>
                <span class="c1"># userage=&#39;{parsed_user[&#39;userage&#39;]}&#39;,</span>
                <span class="c1"># usercity=&#39;{parsed_user[&#39;usercity&#39;]}&#39;,</span>
                <span class="c1"># usertype=&#39;{parsed_user[&#39;usertype&#39;]}&#39;,</span>
                <span class="c1"># users_id = &#39;{user.id}&#39;</span>
                <span class="c1"># WHERE username=&#39;{username}&#39;</span>
                <span class="c1"># &quot;&quot;&quot;)</span>
                <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Update user_data SET username=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; WHERE username = &#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;userage&#39;</span><span class="p">]:</span>
                <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Update user_data SET userage=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;userage&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; WHERE username = &#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;usercity&#39;</span><span class="p">]:</span>
                <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Update user_data SET usercity=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;usercity&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; WHERE username = &#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;usertype&#39;</span><span class="p">]:</span>
                <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Update user_data SET usertype=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;usertype&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39; WHERE username = &#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]:</span>
                <span class="n">updated_data</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select * from user_data where username=&#39;</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]:</span>
                <span class="n">updated_data</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select * from user_data where username=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>
            <span class="n">updated_user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;select * from users where id=&#39;</span><span class="si">{</span><span class="n">updated_data</span><span class="p">[</span><span class="s1">&#39;users_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>

            <span class="k">return</span> <span class="p">([</span><span class="n">updated_user</span><span class="p">,</span> <span class="n">updated_data</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="CreateUser"><a class="viewcode-back" href="../restapi.html#restapi.CreateUser">[docs]</a><span class="k">class</span> <span class="nc">CreateUser</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This has one method to create user and store the user data on the database and the firebase.&quot;&quot;&quot;</span>
    <span class="c1"># The below line will help us to convert our python object to look like JSON</span>
    <span class="c1"># here the resource fields tells that the returned data&#39;s should be in the JSON format...</span>
    <span class="c1"># then @marshal_with actually injects that rule in our method.</span>
<div class="viewcode-block" id="CreateUser.post"><a class="viewcode-back" href="../restapi.html#restapi.CreateUser.post">[docs]</a>    <span class="nd">@marshal_with</span><span class="p">(</span><span class="n">create_user_field</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method is used to create a user and store it on the database and the firebase for email and password login. </span>

<span class="sd">        :return: user details like id and email</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parsed_user</span> <span class="o">=</span> <span class="n">create_user_req</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="c1"># user = UserData.query.filter_by(username=parsed_user[&quot;username&quot;]).first()</span>
        <span class="n">email_exist</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;select * from users where email=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="c1"># if the email already exists, then</span>
        <span class="k">if</span> <span class="n">email_exist</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Email already exist.&#39;</span><span class="p">)</span>

        <span class="n">hashed_password</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="o">.</span><span class="n">generate_password_hash</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

        <span class="c1"># add user to firebase</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">register_firebase</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">create_user_with_email_and_password</span><span class="p">(</span>
                <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">],</span> <span class="n">hashed_password</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;User not created, Try to enter valid entries. PROBLEM CAUSED BY GOOGLE FIREBASE&#39;&#39;&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]:</span>
            <span class="n">create_user</span> <span class="o">=</span> <span class="n">Users</span><span class="p">(</span>
                <span class="n">email</span><span class="o">=</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">],</span> <span class="n">fullname</span><span class="o">=</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;fullname&#39;</span><span class="p">],</span> <span class="n">password</span><span class="o">=</span><span class="n">hashed_password</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">create_user</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">session</span><span class="p">[</span><span class="s1">&#39;created_user_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">create_user</span><span class="o">.</span><span class="n">id</span>

        <span class="k">if</span> <span class="n">create_user</span><span class="p">:</span>
            <span class="n">created_user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from users where email=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">created_user</span></div></div>


<div class="viewcode-block" id="AddUserData"><a class="viewcode-back" href="../restapi.html#restapi.AddUserData">[docs]</a><span class="k">class</span> <span class="nc">AddUserData</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This has one method to add user data and store the user data on the database.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="AddUserData.post"><a class="viewcode-back" href="../restapi.html#restapi.AddUserData.post">[docs]</a>    <span class="nd">@marshal_with</span><span class="p">(</span><span class="n">add_user_data_field</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method is used to add user information to the current user and store it on the database. </span>

<span class="sd">        :return: all the data of the created user  </span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parsed_user</span> <span class="o">=</span> <span class="n">add_user_data_req</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">user_exist</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;select * from user_data where username=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

        <span class="n">created_user_id</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;created_user_id&quot;</span><span class="p">)</span>
        <span class="n">user_id_exist</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;select * from user_data where users_id=&#39;</span><span class="si">{</span><span class="n">created_user_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="c1"># if the username already exists, then</span>
        <span class="k">if</span> <span class="n">user_exist</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;User already exist with the username.&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">user_id_exist</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;User Data with current user id already exist. Cannot create it again. Try to update it.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">created_user_id</span><span class="p">:</span>
            <span class="n">create_user_data</span> <span class="o">=</span> <span class="n">UserData</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">parsed_user</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span> <span class="n">userage</span><span class="o">=</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;userage&#39;</span><span class="p">],</span>
                                        <span class="n">usercity</span><span class="o">=</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;usercity&#39;</span><span class="p">],</span> <span class="n">usertype</span><span class="o">=</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;usertype&#39;</span><span class="p">],</span> <span class="n">users_id</span><span class="o">=</span><span class="n">created_user_id</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">create_user_data</span><span class="p">)</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="n">created_user_data</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from user_data where username=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">created_user_data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;No Users are currently created or logged in to add data.&quot;</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="Login"><a class="viewcode-back" href="../restapi.html#restapi.Login">[docs]</a><span class="k">class</span> <span class="nc">Login</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This will be responsible for logging in the manually created user.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Login.post"><a class="viewcode-back" href="../restapi.html#restapi.Login.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method is used to login a particular user by verifying it on the database and the firebase for authentication.</span>

<span class="sd">        :return: all the data of the logged in user  </span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># instead we can use request.json[&#39;field_name&#39;] for individual fields.</span>
        <span class="n">parsed_user</span> <span class="o">=</span> <span class="n">user_login_req</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;select * from users where email=&#39;</span><span class="si">{</span><span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="c1"># pdb.set_trace()</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Email Not found or Unauthorized User&#39;</span><span class="p">)</span>
            <span class="c1"># or</span>
            <span class="c1"># return jsonify({&quot;message&quot;: &#39;Unauthorized User&#39;}), 401</span>

        <span class="c1"># means...if not True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">bcrypt</span><span class="o">.</span><span class="n">check_password_hash</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span> <span class="n">parsed_user</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]):</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Unauthorized User, password not matching.&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># here simply getting the current user details for using the email to verify because we are not using email for signin. But in firebase we are using email for verfitication. That&#39;s why</span>
                <span class="n">login_firebase</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">sign_in_with_email_and_password</span><span class="p">(</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">],</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">])</span>
                <span class="n">session</span><span class="p">[</span><span class="s1">&#39;created_user_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">abort</span><span class="p">(</span><span class="mi">409</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;problem with Google firebase authentication.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
            <span class="n">userdata</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;select * from user_data where users_id=&#39;</span><span class="si">{</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">userdata</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">([</span><span class="n">user</span><span class="o">.</span><span class="n">_asdict</span><span class="p">(),</span> <span class="n">userdata</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">user</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="Logout"><a class="viewcode-back" href="../restapi.html#restapi.Logout">[docs]</a><span class="k">class</span> <span class="nc">Logout</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This has one method to logout user.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="Logout.post"><a class="viewcode-back" href="../restapi.html#restapi.Logout.post">[docs]</a>    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method will logout if any users are currently logged in by using session id.</span>
<span class="sd">        </span>
<span class="sd">        :return: logged out or not</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">session</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;created_user_id&quot;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;No user found with the Session ID.&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Successfully logged out&#39;</span><span class="p">},</span> <span class="mi">200</span></div></div>


<div class="viewcode-block" id="CurrentUser"><a class="viewcode-back" href="../restapi.html#restapi.CurrentUser">[docs]</a><span class="k">class</span> <span class="nc">CurrentUser</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This has one method to get the currently logged in user.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="CurrentUser.get"><a class="viewcode-back" href="../restapi.html#restapi.CurrentUser.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method will get the currently logged in user by using the session id and returns the data.</span>
<span class="sd">        </span>
<span class="sd">        :return: the currently logged in user data</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;created_user_id&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">user_id</span><span class="p">:</span>
            <span class="n">abort</span><span class="p">(</span><span class="mi">401</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Unauthorized User or No Logged in users.&#39;</span><span class="p">)</span>
            <span class="c1"># or</span>
            <span class="c1"># return jsonify({&#39;error&#39;:&quot;Unauthorized User or No Logged in users.&quot;}), 409</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;select * from users where id=&#39;</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="n">userdata</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;select * from user_data where users_id=&#39;</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
        <span class="c1"># pdb.set_trace()</span>
        <span class="k">if</span> <span class="n">userdata</span> <span class="ow">and</span> <span class="n">user</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">([</span><span class="n">user</span><span class="o">.</span><span class="n">_asdict</span><span class="p">(),</span> <span class="n">userdata</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()])</span>
        <span class="k">elif</span> <span class="n">user</span> <span class="ow">or</span> <span class="n">userdata</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">([</span><span class="n">user</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()])</span>
            <span class="k">if</span> <span class="n">userdata</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">([</span><span class="n">userdata</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">({</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;no current users&quot;</span><span class="p">}),</span> <span class="mi">200</span></div></div>


<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">CreateUser</span><span class="p">,</span> <span class="s1">&#39;/create_user&#39;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">AddUserData</span><span class="p">,</span> <span class="s1">&#39;/add_user_data&#39;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">SearchUser</span><span class="p">,</span> <span class="s1">&#39;/&lt;string:username&gt;&#39;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">AllUsers</span><span class="p">,</span> <span class="s1">&#39;/allusers&#39;</span><span class="p">)</span>

<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">Login</span><span class="p">,</span> <span class="s1">&#39;/login&#39;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">Logout</span><span class="p">,</span> <span class="s1">&#39;/logout&#39;</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">CurrentUser</span><span class="p">,</span> <span class="s1">&#39;/current_user&#39;</span><span class="p">)</span>

<span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">ReactGoogleSignin</span><span class="p">,</span> <span class="s1">&#39;/google_signin&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Vishnu.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>